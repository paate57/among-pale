<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1e1e2e;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        button {
            background: #ff4757;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            margin: 10px 5px;
        }
        button:hover {
            background: #ff6b7a;
        }
        canvas {
            border: 2px solid #444;
            margin: 10px 0;
            display: block;
        }
        .info {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        h1 { color: #ff4757; }
        h2 { color: #5352ed; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Asset Generator</h1>
        <p>Genera gli asset necessari per il gioco</p>

        <div class="info">
            <h2>üì¶ Istruzioni:</h2>
            <ol>
                <li>Clicca su "Genera Tileset"</li>
                <li>Salva l'immagine come <strong>tileset.png</strong> in <code>public/assets/</code></li>
                <li>Clicca su "Genera Sprite Giocatore"</li>
                <li>Salva l'immagine come <strong>player.png</strong> in <code>public/assets/</code></li>
            </ol>
        </div>

        <h2>üî≤ Tileset (256x256)</h2>
        <button onclick="generateTileset()">Genera Tileset</button>
        <button onclick="downloadCanvas('tileset-canvas', 'tileset.png')">Scarica Tileset</button>
        <br>
        <canvas id="tileset-canvas"></canvas>

        <h2>üèÉ Sprite Giocatore (128x192)</h2>
        <button onclick="generatePlayer()">Genera Sprite Giocatore</button>
        <button onclick="downloadCanvas('player-canvas', 'player.png')">Scarica Sprite</button>
        <br>
        <canvas id="player-canvas"></canvas>
    </div>

    <script>
        // Genera il tileset
        function generateTileset() {
            const canvas = document.getElementById('tileset-canvas');
            canvas.width = 256;
            canvas.height = 256;
            const ctx = canvas.getContext('2d');

            // Sfondo nero
            ctx.fillStyle = '#000000';
            ctx.fillRect(0, 0, 256, 256);

            const tileSize = 16;
            const colors = [
                '#323232',  // 0 - vuoto (grigio scuro)
                '#646464',  // 1 - muro (grigio medio)
                '#C8C8C8',  // 2 - pavimento (grigio chiaro)
                '#8B4513',  // 3 - marrone
                '#228B22',  // 4 - verde scuro
                '#4169E1',  // 5 - blu
            ];

            // Disegna i tile
            for (let y = 0; y < 16; y++) {
                for (let x = 0; x < 16; x++) {
                    const tileId = (y * 16 + x) % colors.length;
                    const color = colors[tileId];
                    
                    ctx.fillStyle = color;
                    ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
                    
                    // Bordo
                    ctx.strokeStyle = '#000000';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(x * tileSize, y * tileSize, tileSize, tileSize);
                }
            }

            console.log('‚úÖ Tileset generato!');
        }

        // Genera lo sprite del giocatore
        function generatePlayer() {
            const canvas = document.getElementById('player-canvas');
            canvas.width = 128;
            canvas.height = 192;
            const ctx = canvas.getContext('2d');

            // Sfondo trasparente
            ctx.clearRect(0, 0, 128, 192);

            // Funzione per disegnare un personaggio stile Among Us
            function drawPlayer(x, y, frame) {
                // Corpo principale (forma a fagiolo)
                ctx.fillStyle = '#FF6464';
                ctx.beginPath();
                ctx.ellipse(x + 16, y + 25, 8, 10, 0, 0, Math.PI * 2);
                ctx.fill();

                // Visiera (ellisse orizzontale)
                ctx.fillStyle = '#64B5F6';
                ctx.beginPath();
                ctx.ellipse(x + 16, y + 18, 6, 4, 0, 0, Math.PI * 2);
                ctx.fill();

                // Bordo visiera
                ctx.strokeStyle = '#1976D2';
                ctx.lineWidth = 1;
                ctx.stroke();

                // Gambe - animazione alternata
                ctx.fillStyle = '#FF6464';
                const legOffset = frame % 2 === 0 ? 0 : 2;
                
                // Gamba sinistra
                ctx.fillRect(x + 10, y + 35 + legOffset, 3, 10);
                // Gamba destra
                ctx.fillRect(x + 19, y + 35 - legOffset, 3, 10);

                // Zaino (dettaglio)
                ctx.fillStyle = '#E53935';
                ctx.fillRect(x + 18, y + 22, 6, 8);
                ctx.fillRect(x + 19, y + 24, 4, 2);
            }

            // Disegna 16 frame (4 righe x 4 colonne)
            // Riga 0: Down (gi√π)
            // Riga 1: Left (sinistra)
            // Riga 2: Right (destra)
            // Riga 3: Up (su)
            for (let row = 0; row < 4; row++) {
                for (let col = 0; col < 4; col++) {
                    const x = col * 32;
                    const y = row * 48;
                    
                    drawPlayer(x, y, col);
                }
            }

            console.log('‚úÖ Sprite giocatore generato!');
        }

        // Funzione per scaricare il canvas come PNG
        function downloadCanvas(canvasId, filename) {
            const canvas = document.getElementById(canvasId);
            
            if (canvas.width === 0) {
                alert('Genera prima l\'immagine cliccando sul bottone "Genera"!');
                return;
            }

            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                link.click();
                URL.revokeObjectURL(url);
                console.log('‚úÖ Download avviato:', filename);
            });
        }

        // Genera automaticamente all'apertura della pagina
        window.onload = function() {
            generateTileset();
            generatePlayer();
        };
    </script>
</body>
</html>